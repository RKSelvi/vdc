name: 'Build and deploy the VDC toolkit'
description: 'Builds toolkit for VDC.'
author: 'Jack '
inputs:
  repo-token:
    description: 'The GITHUB_TOKEN used to authenticate to the current repository'
    required: true
outputs: 
  time: 
    description: 'Time greeted'
runs:
  using: 'docker'
  image: 'dockerfile'
  args:
    - ${{ inputs.repo-token }}
  env:
        SERVICE_PRINCIPAL: ${{ secrets.SERVICE_PRINCIPAL }}
        SERVICE_PRINCIPAL_PASS: ${{ secrets.SERVICE_PRINCIPAL_PASS }}
        IS_DEV_OPS : "true"
        DEVOPS_SERVICE_PRINCIPAL_USER_ID: ${{ secrets.DEVOPS_SERVICE_PRINCIPAL_USER_ID }}
        ADMIN_USER_NAME: ${{ secrets.ADMIN_USER_NAME }}
        ADMIN_USER_PWD: ${{ secrets.ADMIN_USER_PWD }}
        DOMAIN_ADMIN_USERNAME: ${{ secrets.DOMAIN_ADMIN_USERNAME }}
        DOMAIN_ADMIN_USER_PWD: ${{ secrets.DOMAIN_ADMIN_USER_PWD }}
        ORGANIZATION_NAME : "MS"
        AZURE_LOCATION : "West US 2"
        AZURE_ENVIRONMENT_NAME : "AzureCloud"
        TENANT_ID : ${{ secrets.TENANT_ID }}
        SUBSCRIPTION_ID : ${{ secrets.SUBSCRIPTION_ID }}
        KEYVAULT_MANAGEMENT_USER_ID  : ${{ secrets.KEYVAULT_MANAGEMENT_USER_ID }}
        AZURE_DISCOVERY_URL : "https://management.azure.com/metadata/endpoints?api-version=2019-05-01"
branding:
  color: red
  icon: flag